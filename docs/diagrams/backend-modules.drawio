<mxfile host="app.diagrams.net" modified="2026-02-08T00:00:00.000Z" agent="draw.io" version="22.0.0" type="device">
  <diagram id="backend-modules" name="Backend Modules">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="750" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Backend Module Map — Python Packages" style="text;html=1;fontSize=20;fontStyle=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="30" y="10" width="500" height="40" as="geometry" />
        </mxCell>

        <!-- ==================== API LAYER ==================== -->
        <mxCell id="api-layer" value="API Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;fontSize=13;verticalAlign=top;spacingTop=4;" vertex="1" parent="1">
          <mxGeometry x="30" y="60" width="1140" height="100" as="geometry" />
        </mxCell>
        <mxCell id="webapi" value="modules/webapi/&#xa;&#xa;application.py (FastAPI factory)&#xa;routes.py, media_routes.py&#xa;auth_routes.py, admin_routes.py&#xa;subtitles router, schemas/" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#6c8ebf;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="50" y="85" width="240" height="65" as="geometry" />
        </mxCell>
        <mxCell id="cli-mod" value="modules/cli/&#xa;&#xa;orchestrator.py&#xa;user_commands.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#6c8ebf;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="310" y="85" width="160" height="65" as="geometry" />
        </mxCell>
        <mxCell id="auth-mod" value="modules/user_management/&#xa;&#xa;auth_service.py, local_user_store.py&#xa;session_manager.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#6c8ebf;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="490" y="85" width="250" height="65" as="geometry" />
        </mxCell>
        <mxCell id="config-mod" value="modules/config_manager/&#xa;&#xa;settings.py, config resolution&#xa;environment.py (.env loader)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#6c8ebf;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="760" y="85" width="240" height="65" as="geometry" />
        </mxCell>

        <!-- ==================== SERVICE LAYER ==================== -->
        <mxCell id="svc-layer" value="Service Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;fontSize=13;verticalAlign=top;spacingTop=4;" vertex="1" parent="1">
          <mxGeometry x="30" y="185" width="1140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="svc-pipeline" value="modules/services/&#xa;pipeline_service.py&#xa;&#xa;Coordinates full pipeline:&#xa;ingest → translate → render" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#82b366;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="50" y="210" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="svc-jobmgr" value="modules/services/&#xa;job_manager/&#xa;&#xa;Job lifecycle, persistence&#xa;state machine, metadata" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#82b366;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="270" y="210" width="190" height="80" as="geometry" />
        </mxCell>
        <mxCell id="svc-library" value="modules/library/&#xa;&#xa;library_service.py&#xa;library_sync.py&#xa;library_repository.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#82b366;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="480" y="210" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="svc-subtitle" value="modules/services/&#xa;subtitle_service.py&#xa;youtube_dubbing/" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#82b366;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="670" y="210" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="svc-other" value="modules/services/&#xa;assistant.py (MyLinguist)&#xa;resume_service.py&#xa;export_service.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#82b366;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="860" y="210" width="180" height="80" as="geometry" />
        </mxCell>

        <!-- ==================== CORE LAYER ==================== -->
        <mxCell id="core-layer" value="Core Processing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1;fontSize=13;verticalAlign=top;spacingTop=4;" vertex="1" parent="1">
          <mxGeometry x="30" y="330" width="700" height="110" as="geometry" />
        </mxCell>
        <mxCell id="core-ingest" value="modules/core/&#xa;ingestion.py&#xa;&#xa;EPUB text extraction&#xa;sentence splitting" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#d6b656;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="50" y="355" width="155" height="70" as="geometry" />
        </mxCell>
        <mxCell id="core-render" value="modules/core/rendering/&#xa;&#xa;pipeline.py (orchestrator)&#xa;exporters.py (chunk writer)&#xa;timeline.py (timing refit)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#d6b656;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="225" y="355" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="core-output" value="modules/render/&#xa;&#xa;audio_pipeline.py&#xa;output_writer.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#d6b656;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="445" y="355" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="core-meta" value="modules/&#xa;metadata_manager.py&#xa;&#xa;MetadataLoader" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#d6b656;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="625" y="355" width="90" height="70" as="geometry" />
        </mxCell>

        <!-- ==================== BACKEND ENGINES ==================== -->
        <mxCell id="engine-layer" value="Backend Engines" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;fontSize=13;verticalAlign=top;spacingTop=4;" vertex="1" parent="1">
          <mxGeometry x="30" y="465" width="1140" height="120" as="geometry" />
        </mxCell>

        <!-- Translation -->
        <mxCell id="eng-translate" value="modules/translation_engine.py&#xa;modules/translation_providers/&#xa;&#xa;Google Translate adapter&#xa;LLM translation (Ollama)&#xa;Multi-level fallback chain" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#b85450;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="50" y="495" width="230" height="80" as="geometry" />
        </mxCell>

        <!-- TTS -->
        <mxCell id="eng-tts" value="modules/audio/backends/&#xa;&#xa;base.py (BaseTTSBackend)&#xa;macos_say.py  |  gtts.py  |  piper.py&#xa;Registry + factory pattern" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#b85450;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="300" y="495" width="230" height="80" as="geometry" />
        </mxCell>

        <!-- Alignment -->
        <mxCell id="eng-align" value="modules/align/backends/&#xa;whisperx_adapter.py&#xa;&#xa;Word-level forced alignment&#xa;Wav2Vec2 models" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#b85450;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="550" y="495" width="200" height="80" as="geometry" />
        </mxCell>

        <!-- Images -->
        <mxCell id="eng-img" value="modules/images/&#xa;&#xa;drawthings.py (SD client)&#xa;prompting.py (LLM prompts)&#xa;style_templates.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#b85450;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="770" y="495" width="190" height="80" as="geometry" />
        </mxCell>

        <!-- LLM -->
        <mxCell id="eng-llm" value="modules/&#xa;llm_client.py&#xa;llm_endpoints.py&#xa;llm_providers.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#b85450;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="980" y="495" width="140" height="80" as="geometry" />
        </mxCell>

        <!-- ==================== OBSERVABILITY ==================== -->
        <mxCell id="obs-layer" value="Observability &amp; Utilities" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=1;fontSize=12;verticalAlign=top;spacingTop=4;" vertex="1" parent="1">
          <mxGeometry x="30" y="610" width="1140" height="55" as="geometry" />
        </mxCell>
        <mxCell id="obs-progress" value="progress_tracker.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#666;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="50" y="633" width="130" height="22" as="geometry" />
        </mxCell>
        <mxCell id="obs-log" value="logging_manager.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#666;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="200" y="633" width="130" height="22" as="geometry" />
        </mxCell>
        <mxCell id="obs-observe" value="observability.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#666;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="350" y="633" width="110" height="22" as="geometry" />
        </mxCell>
        <mxCell id="obs-ramdisk" value="ramdisk_manager.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#666;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="480" y="633" width="130" height="22" as="geometry" />
        </mxCell>
        <mxCell id="obs-env" value="environment.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#666;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="630" y="633" width="110" height="22" as="geometry" />
        </mxCell>

        <!-- ==================== KEY ARROWS ==================== -->
        <mxCell id="d1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#4d4d4d;strokeWidth=1.5;" edge="1" source="api-layer" target="svc-layer" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="d2" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#4d4d4d;strokeWidth=1.5;" edge="1" source="svc-layer" target="core-layer" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="d3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#4d4d4d;strokeWidth=1.5;" edge="1" source="core-layer" target="engine-layer" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Config sidebar -->
        <mxCell id="config-box" value="Configuration&#xa;&#xa;conf/config.json (defaults)&#xa;conf/config.local.json (overrides)&#xa;.env, .env.local&#xa;Environment variables" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6d0de;strokeColor=#996185;fontSize=10;align=left;spacingLeft=6;" vertex="1" parent="1">
          <mxGeometry x="760" y="335" width="220" height="100" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
